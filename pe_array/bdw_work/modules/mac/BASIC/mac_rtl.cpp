// Generated by stratus_hls 19.10-p100  (91500.011111)
// Wed Dec  2 16:54:58 2020
// from mac.cpp
#include "mac_rtl.h"

struct mac;
mac::mac(sc_module_name name) : sc_module(name) 
    ,clk("clk")
    ,rstn("rstn")
    ,init("init")
    ,clear("clear")
    ,src_vld("src_vld")
    ,src_0("src_0")
    ,src_1("src_1")
    ,acc("acc")
    ,src_1_1d("src_1_1d")
    ,mac_Mul_10Sx8S_18S_1_1_out1("mac_Mul_10Sx8S_18S_1_1_out1")
    ,mac_N_Mux_32_2_0_4_5_out1("mac_N_Mux_32_2_0_4_5_out1")
    ,mac_N_Mux_32_2_0_4_4_out1("mac_N_Mux_32_2_0_4_4_out1")
    ,mac_Add_32Sx18S_32S_4_3_out1("mac_Add_32Sx18S_32S_4_3_out1")
    ,mac_N_Mux_18_2_1_1_2_out1("mac_N_Mux_18_2_1_1_2_out1")
    ,mac_N_Mux_32_2_0_4_6_out1("mac_N_Mux_32_2_0_4_6_out1")
{
  SC_METHOD(drive_acc);
  sensitive << clk.pos();
  sensitive << rstn.neg();
  dont_initialize();

  SC_METHOD(mac_Add_32Sx18S_32S_4_3);
  sensitive << ( mac_N_Mux_18_2_1_1_2_out1 );
  sensitive << ( acc );

  SC_METHOD(mac_N_Mux_32_2_0_4_4);
  sensitive << ( src_vld );
  sensitive << ( mac_Add_32Sx18S_32S_4_3_out1 );
  sensitive << ( acc );

  SC_METHOD(mac_N_Mux_32_2_0_4_5);
  sensitive << ( clear );
  sensitive << ( mac_N_Mux_18_2_1_1_2_out1 );
  sensitive << ( mac_N_Mux_32_2_0_4_4_out1 );

  SC_METHOD(mac_N_Mux_32_2_0_4_6);
  sensitive << ( init );
  sensitive << ( mac_N_Mux_32_2_0_4_5_out1 );

  SC_METHOD(mac_Mul_10Sx8S_18S_1_1);
  sensitive << ( src_1 );
  sensitive << ( src_0 );

  SC_METHOD(mac_N_Mux_18_2_1_1_2);
  sensitive << ( src_vld );
  sensitive << ( mac_Mul_10Sx8S_18S_1_1_out1 );

  SC_METHOD(drive_src_1_1d);
  sensitive << clk.pos();
  sensitive << rstn.neg();
  dont_initialize();

}
// resource: regr_ac_32
void mac::drive_acc(){
  if ( (rstn.read() == 0ULL) ) {
    acc = 0LL;
  } else {
    acc = (sc_int<32> ) (mac_N_Mux_32_2_0_4_6_out1.read());
  }
}
// resource: mac_Add_32Sx18S_32S_4  instance: mac_Add_32Sx18S_32S_4_3
void mac::mac_Add_32Sx18S_32S_4_3(){
  mac_Add_32Sx18S_32S_4_3_out1 = (acc.read() + (sc_int<18> )
                                 mac_N_Mux_18_2_1_1_2_out1.read());
}
// resource: mac_N_Mux_32_2_0_4
void mac::mac_N_Mux_32_2_0_4_4(){
  if ( src_vld.read() ) {
    mac_N_Mux_32_2_0_4_4_out1 = (sc_uint<32> ) (mac_Add_32Sx18S_32S_4_3_out1
                                .read());
  } else {
    mac_N_Mux_32_2_0_4_4_out1 = (sc_uint<32> ) (acc.read());
  }
}
// resource: mac_N_Mux_32_2_0_4
void mac::mac_N_Mux_32_2_0_4_5(){
  if ( clear.read() ) {
    mac_N_Mux_32_2_0_4_5_out1 = (sc_uint<32> ) ((sc_int<32> )((sc_int<18> )
                                mac_N_Mux_18_2_1_1_2_out1.read()));
  } else {
    mac_N_Mux_32_2_0_4_5_out1 = mac_N_Mux_32_2_0_4_4_out1.read();
  }
}
// resource: mac_N_Mux_32_2_0_4
void mac::mac_N_Mux_32_2_0_4_6(){
  if ( init.read() ) {
    mac_N_Mux_32_2_0_4_6_out1 = 0ULL;
  } else {
    mac_N_Mux_32_2_0_4_6_out1 = mac_N_Mux_32_2_0_4_5_out1.read();
  }
}
// resource: mac_Mul_10Sx8S_18S_1  instance: mac_Mul_10Sx8S_18S_1_1
void mac::mac_Mul_10Sx8S_18S_1_1(){
  mac_Mul_10Sx8S_18S_1_1_out1 = src_0.read() * src_1.read();
}
// resource: mac_N_Mux_18_2_1_1
void mac::mac_N_Mux_18_2_1_1_2(){
  if ( src_vld.read() ) {
    mac_N_Mux_18_2_1_1_2_out1 = (sc_uint<18> ) (mac_Mul_10Sx8S_18S_1_1_out1
                                .read());
  } else {
    mac_N_Mux_18_2_1_1_2_out1 = 0ULL;
  }
}
// resource: regr_ac_8
void mac::drive_src_1_1d(){
  if ( (rstn.read() == 0ULL) ) {
    src_1_1d = 0LL;
  } else {
    src_1_1d = src_1.read();
  }
}
