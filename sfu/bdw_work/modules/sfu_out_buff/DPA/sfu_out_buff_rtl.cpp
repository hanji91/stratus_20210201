// Generated by stratus_hls 19.10-p100  (91500.011111)
// Fri Jan 15 20:25:17 2021
// from sfu_out_buff.cpp
#include "sfu_out_buff_rtl.h"

struct sfu_out_buff;
sfu_out_buff::sfu_out_buff(sc_module_name name) : sc_module(name) 
    ,clk("clk")
    ,rstn("rstn")
    ,enable("enable")
    ,learned_clip_en("learned_clip_en")
    ,in0_data_0("in0_data_0")
    ,in0_data_1("in0_data_1")
    ,in0_data_2("in0_data_2")
    ,in0_data_3("in0_data_3")
    ,in0_data_4("in0_data_4")
    ,in0_data_5("in0_data_5")
    ,in0_data_6("in0_data_6")
    ,in0_data_7("in0_data_7")
    ,in0_data_valid("in0_data_valid")
    ,in1_data_0("in1_data_0")
    ,in1_data_1("in1_data_1")
    ,in1_data_2("in1_data_2")
    ,in1_data_3("in1_data_3")
    ,in1_data_4("in1_data_4")
    ,in1_data_5("in1_data_5")
    ,in1_data_6("in1_data_6")
    ,in1_data_7("in1_data_7")
    ,in1_data_valid("in1_data_valid")
    ,out_data("out_data")
    ,out_data_valid("out_data_valid")
    ,sfu_out_buff_N_Muxb_1_2_10_4_12_out1("sfu_out_buff_N_Muxb_1_2_10_4_12_out1")
    ,sfu_out_buff_And_1Ux1U_1U_4_13_out1("sfu_out_buff_And_1Ux1U_1U_4_13_out1")
    ,sfu_out_buff_And_1Ux1U_1U_4_10_out1("sfu_out_buff_And_1Ux1U_1U_4_10_out1")
    ,sfu_out_buff_MuxAdd2i1u2i0u1_4_11_out1("sfu_out_buff_MuxAdd2i1u2i0u1_4_11_out1")
    ,sfu_out_buff_And_1Ux1U_1U_4_8_out1("sfu_out_buff_And_1Ux1U_1U_4_8_out1")
    ,sfu_out_buff_Or_1Ux1U_1U_4_7_out1("sfu_out_buff_Or_1Ux1U_1U_4_7_out1")
    ,sfu_out_buff_Eqi3u2_4_6_out1("sfu_out_buff_Eqi3u2_4_6_out1")
    ,data_cnt("data_cnt")
    ,sfu_out_buff_Not_1U_1U_4_5_out1("sfu_out_buff_Not_1U_1U_4_5_out1")
    ,sfu_out_buff_And_1Ux1U_1U_4_9_out1("sfu_out_buff_And_1Ux1U_1U_4_9_out1")
    ,sfu_out_buff_N_MuxB_320_2_8_4_3_out1("sfu_out_buff_N_MuxB_320_2_8_4_3_out1")
    ,sfu_out_buff_N_MuxB_320_2_0_4_2_out1("sfu_out_buff_N_MuxB_320_2_0_4_2_out1")
    ,sfu_out_buff_N_MuxB_320_2_0_4_2_in2("sfu_out_buff_N_MuxB_320_2_0_4_2_in2")
    ,t_data("t_data")
    ,sfu_out_buff_N_MuxB_320_2_8_4_1_out1("sfu_out_buff_N_MuxB_320_2_8_4_1_out1")
    ,r_data_valid("r_data_valid")
    ,sfu_out_buff_N_MuxB_320_2_8_4_1_in2("sfu_out_buff_N_MuxB_320_2_8_4_1_in2")
    ,r_data("r_data")
    ,sfu_out_buff_N_MuxB_320_2_9_4_4_out1("sfu_out_buff_N_MuxB_320_2_9_4_4_out1")
{
  SC_METHOD(drive_out_data);
  sensitive << clk.pos();
  sensitive << rstn.neg();
  dont_initialize();

  SC_METHOD(drive_sfu_out_buff_N_MuxB_320_2_8_4_1_in2);
  sensitive << ( out_data );
  sensitive << ( r_data );

  SC_METHOD(sfu_out_buff_N_MuxB_320_2_8_4_1);
  sensitive << ( r_data_valid );
  sensitive << ( sfu_out_buff_N_MuxB_320_2_8_4_1_in2 );
  sensitive << ( out_data );

  SC_METHOD(drive_sfu_out_buff_N_MuxB_320_2_0_4_2_in2);
  sensitive << ( t_data );

  SC_METHOD(sfu_out_buff_N_MuxB_320_2_0_4_2);
  sensitive << ( r_data_valid );
  sensitive << ( sfu_out_buff_N_MuxB_320_2_0_4_2_in2 );
  sensitive << ( out_data );

  SC_METHOD(sfu_out_buff_N_MuxB_320_2_8_4_3);
  sensitive << ( learned_clip_en );
  sensitive << ( sfu_out_buff_N_MuxB_320_2_8_4_1_out1 );
  sensitive << ( sfu_out_buff_N_MuxB_320_2_0_4_2_out1 );

  SC_METHOD(sfu_out_buff_N_MuxB_320_2_9_4_4);
  sensitive << ( enable );
  sensitive << ( sfu_out_buff_N_MuxB_320_2_8_4_3_out1 );

  SC_METHOD(drive_out_data_valid);
  sensitive << clk.pos();
  sensitive << rstn.neg();
  dont_initialize();

  SC_METHOD(sfu_out_buff_Not_1U_1U_4_5);
  sensitive << ( learned_clip_en );

  SC_METHOD(sfu_out_buff_Eqi3u2_4_6);
  sensitive << ( data_cnt );

  SC_METHOD(sfu_out_buff_Or_1Ux1U_1U_4_7);
  sensitive << ( sfu_out_buff_Not_1U_1U_4_5_out1 );
  sensitive << ( sfu_out_buff_Eqi3u2_4_6_out1 );

  SC_METHOD(sfu_out_buff_And_1Ux1U_1U_4_8);
  sensitive << ( r_data_valid );
  sensitive << ( sfu_out_buff_Or_1Ux1U_1U_4_7_out1 );

  SC_METHOD(sfu_out_buff_And_1Ux1U_1U_4_9);
  sensitive << ( enable );
  sensitive << ( sfu_out_buff_And_1Ux1U_1U_4_8_out1 );

  SC_METHOD(drive_data_cnt);
  sensitive << clk.pos();
  sensitive << rstn.neg();
  dont_initialize();

  SC_METHOD(sfu_out_buff_And_1Ux1U_1U_4_10);
  sensitive << ( r_data_valid );
  sensitive << ( enable );

  SC_METHOD(sfu_out_buff_MuxAdd2i1u2i0u1_4_11);
  sensitive << ( sfu_out_buff_And_1Ux1U_1U_4_10_out1 );
  sensitive << ( data_cnt );

  SC_METHOD(drive_r_data_valid);
  sensitive << clk.pos();
  sensitive << rstn.neg();
  dont_initialize();

  SC_METHOD(sfu_out_buff_N_Muxb_1_2_10_4_12);
  sensitive << ( learned_clip_en );
  sensitive << ( in0_data_valid );
  sensitive << ( in1_data_valid );

  SC_METHOD(sfu_out_buff_And_1Ux1U_1U_4_13);
  sensitive << ( enable );
  sensitive << ( sfu_out_buff_N_Muxb_1_2_10_4_12_out1 );

  SC_METHOD(drive_t_data);
  sensitive << clk.pos();
  sensitive << rstn.neg();
  dont_initialize();

  SC_METHOD(drive_r_data);
  sensitive << clk.pos();
  sensitive << rstn.neg();
  dont_initialize();

}
// resource: regr_ac_320
void sfu_out_buff::drive_out_data(){
  if ( (rstn.read() == 0ULL) ) {
    out_data = sc_biguint<320>(0ULL);
  } else {
    out_data = sfu_out_buff_N_MuxB_320_2_9_4_4_out1.read();
  }
}
void sfu_out_buff::drive_sfu_out_buff_N_MuxB_320_2_8_4_1_in2(){
  sfu_out_buff_N_MuxB_320_2_8_4_1_in2 = ( (sc_biguint<320> )(sc_bv<320>)(
                                        (sc_bv<80>)(r_data.read()), 
                                        (sc_bv<240>)(out_data.read().range(319,
                                        80))) );
}
// resource: sfu_out_buff_N_MuxB_320_2_8_4
void sfu_out_buff::sfu_out_buff_N_MuxB_320_2_8_4_1(){
  if ( r_data_valid.read() ) {
    sfu_out_buff_N_MuxB_320_2_8_4_1_out1 = sfu_out_buff_N_MuxB_320_2_8_4_1_in2
                                           .read();
  } else {
    sfu_out_buff_N_MuxB_320_2_8_4_1_out1 = out_data.read();
  }
}
void sfu_out_buff::drive_sfu_out_buff_N_MuxB_320_2_0_4_2_in2(){
  sfu_out_buff_N_MuxB_320_2_0_4_2_in2 = (sc_biguint<257> ) (t_data.read());
}
// resource: sfu_out_buff_N_MuxB_320_2_0_4
void sfu_out_buff::sfu_out_buff_N_MuxB_320_2_0_4_2(){
  if ( r_data_valid.read() ) {
    sfu_out_buff_N_MuxB_320_2_0_4_2_out1 = (sc_biguint<320> )
                                           sfu_out_buff_N_MuxB_320_2_0_4_2_in2
                                           .read();
  } else {
    sfu_out_buff_N_MuxB_320_2_0_4_2_out1 = out_data.read();
  }
}
// resource: sfu_out_buff_N_MuxB_320_2_8_4
void sfu_out_buff::sfu_out_buff_N_MuxB_320_2_8_4_3(){
  if ( learned_clip_en.read() ) {
    sfu_out_buff_N_MuxB_320_2_8_4_3_out1 = sfu_out_buff_N_MuxB_320_2_8_4_1_out1
                                           .read();
  } else {
    sfu_out_buff_N_MuxB_320_2_8_4_3_out1 = sfu_out_buff_N_MuxB_320_2_0_4_2_out1
                                           .read();
  }
}
// resource: sfu_out_buff_N_MuxB_320_2_9_4
void sfu_out_buff::sfu_out_buff_N_MuxB_320_2_9_4_4(){
  if ( enable.read() ) {
    sfu_out_buff_N_MuxB_320_2_9_4_4_out1 = sfu_out_buff_N_MuxB_320_2_8_4_3_out1
                                           .read();
  } else {
    sfu_out_buff_N_MuxB_320_2_9_4_4_out1 = sc_biguint<320>(0ULL);
  }
}
// resource: regr_ac_1
void sfu_out_buff::drive_out_data_valid(){
  if ( (rstn.read() == 0ULL) ) {
    out_data_valid = 0ULL;
  } else {
    out_data_valid = (sc_uint<1> ) (sfu_out_buff_And_1Ux1U_1U_4_9_out1.read());
  }
}
// resource: sfu_out_buff_Not_1U_1U_4  instance: sfu_out_buff_Not_1U_1U_4_5
void sfu_out_buff::sfu_out_buff_Not_1U_1U_4_5(){
  sfu_out_buff_Not_1U_1U_4_5_out1 = !learned_clip_en.read();
}
// resource: sfu_out_buff_Eqi3u2_4  instance: sfu_out_buff_Eqi3u2_4_6
void sfu_out_buff::sfu_out_buff_Eqi3u2_4_6(){
  sfu_out_buff_Eqi3u2_4_6_out1 = (data_cnt.read() == 3ULL);
}
// resource: sfu_out_buff_Or_1Ux1U_1U_4  instance: sfu_out_buff_Or_1Ux1U_1U_4_7
void sfu_out_buff::sfu_out_buff_Or_1Ux1U_1U_4_7(){
  sfu_out_buff_Or_1Ux1U_1U_4_7_out1 = (sc_uint<1> ) (
                                      sfu_out_buff_Eqi3u2_4_6_out1.read() | 
                                      sfu_out_buff_Not_1U_1U_4_5_out1.read());
}
// resource: sfu_out_buff_And_1Ux1U_1U_4  instance: sfu_out_buff_And_1Ux1U_1U_4_8
void sfu_out_buff::sfu_out_buff_And_1Ux1U_1U_4_8(){
  sfu_out_buff_And_1Ux1U_1U_4_8_out1 = (sc_uint<1> ) (
                                       sfu_out_buff_Or_1Ux1U_1U_4_7_out1.read()
                                        & (sc_uint<1> )r_data_valid.read());
}
// resource: sfu_out_buff_And_1Ux1U_1U_4  instance: sfu_out_buff_And_1Ux1U_1U_4_9
void sfu_out_buff::sfu_out_buff_And_1Ux1U_1U_4_9(){
  sfu_out_buff_And_1Ux1U_1U_4_9_out1 = (sc_uint<1> ) (
                                       sfu_out_buff_And_1Ux1U_1U_4_8_out1.read()
                                        & (sc_uint<1> )enable.read());
}
// resource: regr_ac_2
void sfu_out_buff::drive_data_cnt(){
  if ( (rstn.read() == 0ULL) ) {
    data_cnt = 0ULL;
  } else {
    data_cnt = sfu_out_buff_MuxAdd2i1u2i0u1_4_11_out1.read();
  }
}
// resource: sfu_out_buff_And_1Ux1U_1U_4  instance: sfu_out_buff_And_1Ux1U_1U_4_10
void sfu_out_buff::sfu_out_buff_And_1Ux1U_1U_4_10(){
  sfu_out_buff_And_1Ux1U_1U_4_10_out1 = (sc_uint<1> ) (enable.read() & 
                                        r_data_valid.read());
}
// resource: sfu_out_buff_MuxAdd2i1u2i0u1_4
void sfu_out_buff::sfu_out_buff_MuxAdd2i1u2i0u1_4_11(){
  if ( sfu_out_buff_And_1Ux1U_1U_4_10_out1.read() ) {
    sfu_out_buff_MuxAdd2i1u2i0u1_4_11_out1 = (data_cnt.read() + 1ULL);
  } else {
    sfu_out_buff_MuxAdd2i1u2i0u1_4_11_out1 = 0ULL;
  }
}
// resource: regr_ac_1
void sfu_out_buff::drive_r_data_valid(){
  if ( (rstn.read() == 0ULL) ) {
    r_data_valid = 0ULL;
  } else {
    r_data_valid = (sc_uint<1> ) (sfu_out_buff_And_1Ux1U_1U_4_13_out1.read());
  }
}
// resource: sfu_out_buff_N_Muxb_1_2_10_4
void sfu_out_buff::sfu_out_buff_N_Muxb_1_2_10_4_12(){
  if ( learned_clip_en.read() ) {
    sfu_out_buff_N_Muxb_1_2_10_4_12_out1 = (sc_uint<1> ) (in0_data_valid.read())
    ;
  } else {
    sfu_out_buff_N_Muxb_1_2_10_4_12_out1 = (sc_uint<1> ) (in1_data_valid.read())
    ;
  }
}
// resource: sfu_out_buff_And_1Ux1U_1U_4  instance: sfu_out_buff_And_1Ux1U_1U_4_13
void sfu_out_buff::sfu_out_buff_And_1Ux1U_1U_4_13(){
  sfu_out_buff_And_1Ux1U_1U_4_13_out1 = (sc_uint<1> ) (
                                        sfu_out_buff_N_Muxb_1_2_10_4_12_out1
                                        .read() & (sc_uint<1> )enable.read());
}
// resource: mux_256bx2i1c
// resource: regr_en_ac_256
void sfu_out_buff::drive_t_data(){
  if ( (rstn.read() == 0ULL) ) {
    t_data = sc_biguint<256>(0ULL);
  } else {
    switch( (sc_uint<1>)(enable.read()) ) {
    case 1ULL: 
      if ( learned_clip_en.read() );
      else {
        t_data = ( (sc_biguint<256> )(sc_bv<256>)((sc_bv<32>)(in1_data_7.read())
                 , 
                 (sc_bv<224>)((sc_bv<32>)(in1_data_6.read()), 
                 (sc_bv<192>)((sc_bv<32>)(in1_data_5.read()), 
                 (sc_bv<160>)((sc_bv<32>)(in1_data_4.read()), 
                 (sc_bv<128>)((sc_bv<32>)(in1_data_3.read()), 
                 (sc_bv<96>)((sc_bv<32>)(in1_data_2.read()), 
                 (sc_bv<64>)((sc_bv<32>)(in1_data_1.read()), 
                 (sc_bv<32>)(in1_data_0.read())))))))) );
      }
      break;
    case 0ULL: 
      t_data = sc_biguint<256>(0ULL);
      break;
    }
  }
}
// resource: mux_80bx2i1c
// resource: regr_en_ac_80
void sfu_out_buff::drive_r_data(){
  if ( (rstn.read() == 0ULL) ) {
    r_data = sc_biguint<80>(0ULL);
  } else {
    switch( (sc_uint<1>)(enable.read()) ) {
    case 1ULL: 
      if ( learned_clip_en.read() ) {
        r_data = ( (sc_biguint<80> )(sc_bv<80>)((sc_bv<10>)((sc_uint<10> )
                 in0_data_7.read()), 
                 (sc_bv<70>)((sc_bv<10>)((sc_uint<10> )in0_data_6.read()), 
                 (sc_bv<60>)((sc_bv<10>)((sc_uint<10> )in0_data_5.read()), 
                 (sc_bv<50>)((sc_bv<10>)((sc_uint<10> )in0_data_4.read()), 
                 (sc_bv<40>)((sc_bv<10>)((sc_uint<10> )in0_data_3.read()), 
                 (sc_bv<30>)((sc_bv<10>)((sc_uint<10> )in0_data_2.read()), 
                 (sc_bv<20>)((sc_bv<10>)((sc_uint<10> )in0_data_1.read()), 
                 (sc_bv<10>)((sc_uint<10> )in0_data_0.read())))))))) );
      } 
      break;
    case 0ULL: 
      r_data = sc_biguint<80>(0ULL);
      break;
    }
  }
}
